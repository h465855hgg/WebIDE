<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android JS Bridge Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .card { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn { background: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin: 5px; cursor: pointer; }
        .btn:active { background: #0056b3; }
        code { background: #eee; padding: 2px 5px; border-radius: 3px; }
    </style>
</head>
<body>
<h2>WebIDE Bridge æµ‹è¯•</h2>

<!-- è®¾å¤‡ä¿¡æ¯ -->
<div class="card">
    <h3>ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
    <div id="device-info">åŠ è½½ä¸­...</div>
</div>

<!-- äº¤äº’åŠŸèƒ½ -->
<div class="card">
    <h3>ğŸ”” äº¤äº’åé¦ˆ</h3>
    <button class="btn" onclick="NativeAPI.toast('è¿™æ˜¯åŸç”Ÿ Toast')">Toast</button>
    <button class="btn" onclick="NativeAPI.vibrate(100)">éœ‡åŠ¨ 100ms</button>
</div>

<!-- å‰ªè´´æ¿ -->
<div class="card">
    <h3>ğŸ“‹ å‰ªè´´æ¿</h3>
    <label for="copy-input"></label><input type="text" id="copy-input" value="Hello Android" style="padding:5px;">
    <button class="btn" onclick="NativeAPI.clipboard.copy(document.getElementById('copy-input').value)">å¤åˆ¶</button>
    <button class="btn" onclick="readClip()">è¯»å–</button>
    <div id="clip-result" style="margin-top:5px; color:green;"></div>
</div>

<!-- ç½‘ç»œè¯·æ±‚ -->
<div class="card">
    <h3>ğŸŒ è·¨åŸŸè¯·æ±‚</h3>
    <button class="btn" onclick="doRequest()">GitHub API</button>
    <pre id="net-result" style="font-size:12px; overflow:auto; max-height:150px;"></pre>
</div>

<!-- æœ¬åœ°å­˜å‚¨ -->
<div class="card">
    <h3>ğŸ’¾ åŸç”Ÿå­˜å‚¨</h3>
    <button class="btn" onclick="saveTime()">ä¿å­˜å½“å‰æ—¶é—´</button>
    <button class="btn" onclick="readTime()">è¯»å–æ—¶é—´</button>
</div>

<script src="js/api.js"></script>
<script>
    // 1. æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
    const info = NativeAPI.getDeviceInfo();
    if (info) {
        document.getElementById('device-info').innerHTML =
            `å‹å·: ${info.model}<br>SDK: ${info.sdk_int}<br>ç³»ç»Ÿ: Android ${info.android_version}`;
    }

    // 2. å‰ªè´´æ¿è¯»å–
    async function readClip() {
        try {
            const text = await NativeAPI.clipboard.read();
            document.getElementById('clip-result').innerText = "å‰ªè´´æ¿å†…å®¹: " + text;
            NativeAPI.toast("è¯»å–æˆåŠŸ");
        } catch(e) {
            NativeAPI.toast("è¯»å–å¤±è´¥: " + e);
        }
    }

    // 3. ç½‘ç»œè¯·æ±‚
    async function doRequest() {
        const div = document.getElementById('net-result');
        div.innerText = "è¯·æ±‚ä¸­...";
        try {
            const res = await NativeAPI.http.get("https://api.github.com/users/google");
            div.innerText = JSON.stringify(res, null, 2);
            NativeAPI.vibrate(50); // æˆåŠŸéœ‡åŠ¨ä¸€ä¸‹
        } catch(e) {
            div.innerText = "Error: " + e;
        }
    }

    // 4. å­˜å‚¨æµ‹è¯•
    function saveTime() {
        const time = new Date().toLocaleString();
        NativeAPI.storage.set("saved_time", time);
        NativeAPI.toast("å·²ä¿å­˜: " + time);
    }

    function readTime() {
        const time = NativeAPI.storage.get("saved_time");
        NativeAPI.toast("è¯»å–åˆ°: " + (time || "ç©º"));
    }
</script>
</body>
</html>